# API is a requirement of the dashboard import.
api:

# OTA is required for Over-the-Air updating
ota:
  platform: esphome

wifi:
  # Set up a wifi access point using the device name above
  ap:
    password: "12345678"

# In combination with the `ap` this allows the user
# to provision wifi credentials to the device.
captive_portal:

# Sets up the improv via serial client for Wi-Fi provisioning
improv_serial:

script:
  - id: tagtuner_event
    parameters:
      action: string
      uid: string
      uri: string
      artist: string
      playlist: string
    mode: queued
    max_runs: 3
    then:
      - event.trigger:
          id: tagtuner_action
          event_type: !lambda return action;
      - homeassistant.event:
          event: esphome.tagtuner
          data:
            magic: ${magic}
            action: !lambda return action;
            uid: !lambda return uid;
            uri: !lambda return uri;
            artist: !lambda return artist;
            playlist: !lambda return playlist;

event:
  - platform: template
    id: tagtuner_action
    name: "Action"
    # icon: mdi:button-pointer
    # device_class: button
    event_types:
      - clickTriple
      - clickDouble
      - clickLong
      - clickSingle
      - volumeUp
      - volumeDown
      - tagRemoved
      - tagScanned

